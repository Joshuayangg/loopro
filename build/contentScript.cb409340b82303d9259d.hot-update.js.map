{"version":3,"file":"contentScript.cb409340b82303d9259d.hot-update.js","sources":["webpack://loopro/./src/pages/Content/index.js","webpack://loopro/webpack/runtime/getFullHash"],"sourcesContent":["import { printLine } from './modules/print';\n\nvar duration;\nvar pageHasVideo;\nvar video;\n\nvar startTime;\nvar pausedTime;\nvar endTime;\n\n// Initializing values\nvar isPlaying = true;\n\n// Play video function\nfunction playVid() {\n    if (video.paused && !isPlaying) {\n        video.play();\n    }\n}\n\n// Pause video function\nfunction pauseVid() {\n    if (!video.paused && isPlaying) {\n        video.pause();\n    }\n}\n\nwindow.onload = function () {\n\n  // Listener for metadata of video\n  chrome.runtime.onMessage.addListener(\n      function(message, sender, sendResponse) {\n        video = document.getElementsByTagName(\"video\")[0];\n        if (video) {\n          // video exists on the page\n          duration = video.duration;\n          pageHasVideo = duration != null ? true : false;\n\n          // On video playing toggle values\n          video.onplaying = function() {\n              isPlaying = true;\n          };\n\n          // On video pause toggle values\n          video.onpause = function() {\n              isPlaying = false;\n          };\n\n\n        } else {\n          pageHasVideo = false;\n          //TODO: if page doesn't have video, show dialogue\n        }\n\n          switch(message.type) {\n              case \"getVideoData\":\n                  let data = {duration: duration, pageHasVideo: pageHasVideo};\n                  sendResponse(data);\n                  break;\n              default:\n                  console.error(\"Unrecognised message: \", message);\n          }\n      }\n  );\n\n  function loop() {\n    if(this.currentTime >= endTime) {\n        // loop\n        video.currentTime = startTime;\n    }\n  }\n\n  // Listener to control the video\n  chrome.runtime.onMessage.addListener(\n      function(message, sender, sendResponse) {\n          var success = true; // may be false cases in the future\n\n          switch(message.type) {\n              case \"startLoop\":\n                console.log(\"play is happening??\");\n                  startTime = parseFloat(message.startTime);\n                  endTime = parseFloat(message.endTime);\n\n                  // Add listener to video\n                  video.addEventListener(\"timeupdate\", loop);\n                  // Set speed\n                  video.playbackRate = parseFloat(message.speed);\n                  // start video at startTime\n                  video.currentTime = startTime;\n                  if (video.paused && !isPlaying) {\n                      video.play();\n                  }\n                  console.log(\"play is happening??\");\n                  sendResponse(success);\n                  break;\n              case \"pauseLoop\":\n                  // pause video\n                  if (!video.paused && isPlaying) {\n                      video.pause();\n                  }\n                  pausedTime = video.currentTime;\n                  video.removeEventListener(\"timeupdate\", loop);\n                  sendResponse(success);\n                  break;\n              case \"resumeLoop\":\n                  video.currentTime = pausedTime;\n                  video.addEventListener(\"timeupdate\", loop);\n                  if (video.paused && !isPlaying) {\n                      video.play();\n                  }\n              case \"stopLoop\":\n                  // pause video\n                  if (!video.paused && isPlaying) {\n                      video.pause();\n                  }\n                  // remove video listener\n                  video.removeEventListener(\"timeupdate\", loop);\n                  sendResponse(success);\n                  break;\n              case \"changeSpeed\":\n                  // change video speed\n                  video.playbackRate = parseFloat(message.speed);\n                  sendResponse(success);\n                  break;\n              case \"changeStartTime\":\n                  // change startTime\n                  startTime = parseFloat(message.startTime);\n                  sendResponse(success);\n                  break;\n              case \"changeEndTime\":\n                  // change endTime\n                  endTime = parseFloat(message.endTime);\n                  sendResponse(success);\n                  break;\n              case \"getVideoData\":\n                  // other listener will handle that when the time comes\n                  break;\n              default:\n                  console.error(\"Unrecognised message: \", message);\n          }\n      }\n  );\n\n\n}.bind(this);\n","__webpack_require__.h = () => (\"412ea7ccbc690c08eaea\")"],"mappings":";;;;;;;;;;;;;;;;;;;;;AAAA;AAEA;AACA;AACA;AAEA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AAEA;AACA;AAAA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAGA;AACA;AAEA;AACA;AACA;AACA;AACA;AAAA;AAAA;AAAA;AACA;AACA;AACA;AAAA;AACA;AANA;AAQA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AAEA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AACA;AACA;AAAA;AACA;AACA;AACA;AAAA;AACA;AA7DA;AA+DA;AAIA;AACA;;;;;;;;;;AA/IA;AACA;AACA;AAEA;AACA;AACA;AAGA;AAGA;AAOA;;;;;;;;;;A;;;;;;;;ACrBA;;;;A","sourceRoot":""}